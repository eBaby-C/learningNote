# 20230120

## 自定义指令

### 局部注册

> 局部注册的自定义指令，默认在子组件内生效，子组件内无需重新注册即可使用父组件的自定义指令。

```typescript
===对象式写法===
// 注意 directives 和 setup 同级
directives: {
    // `directives` 下的每个字段名就是指令名称
    highlight: {
      // 钩子函数
      mounted(el, binding) {
        el.style.backgroundColor =
          typeof binding.value === 'string' ? binding.value : 'unset'
      },
    },
},

<!-- 这个使用默认值 `unset` -->
<div v-highlight>{{ msg }}</div>

<!-- 这个使用传进去的黄色 -->
<div v-highlight="`yellow`">{{ msg }}</div>
```

```typescript
===函数式写法===
export default defineComponent({
  directives: {
    highlight(el, binding) {
      el.style.backgroundColor =
        typeof binding.value === 'string' ? binding.value : 'unset'
    },
  },
})
```

---

## 插槽

>父组件

```typescript
<template>
  <Child>
    <p>这是插槽内容</p>
  </Child>
</template>
```

>子组件

```typescript
<template>
  <slot />
</template>
```

### 具名插槽

>父组件
>> v-slot:name 可以缩写为 #name

```typescript
<template>
  <Child>
    <template v-slot:title>
      <h1>这是标题</h1>
    </template>
  </Child>
</template>
```

>子组件

```typescript
<template>
  <slot name="title"/>
</template>
```
